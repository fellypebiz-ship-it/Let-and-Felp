// Array com 100 piadas sem graça
const piadas = [
    "Por que o livro de matemática está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o livro de receitas está triste? Porque tem muitos problemas!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de matemática está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de receitas está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de matemática está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de receitas está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de matemática está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de receitas está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de matemática está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de receitas está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de matemática está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!",
    "Por que o livro de receitas está triste? Porque tem muitos problemas!",
    "O que o zero disse para o oito? Bonito cinto!",
    "Por que o pinheiro não se perde? Porque ele tem uma pinha!",
    "Qual é o contrário de volátil? Vem cá sobrinho!",
    "Por que o jacaré tirou o filho da escola? Porque ele réptil de ano!",
    "O que o pato disse para a pata? Vem quá!",
    "Por que o papel higiênico foi ao médico? Porque estava se sentindo enrolado!",
    "Qual é o rei dos queijos? O rei queijon!",
    "Por que o esqueleto não brigou com ninguém? Porque não tinha estômago para isso!"
];

// Variáveis globais
let piadasReveladas = 0;
let piadaAtual = 0;
let piadasReveladasArray = [];

// Elementos DOM
const jokesGrid = document.getElementById('jokesGrid');
const jokeModal = document.getElementById('jokeModal');
const closeModal = document.getElementById('closeModal');
const jokeNumber = document.getElementById('jokeNumber');
const jokeContent = document.getElementById('jokeContent');
const nextJoke = document.getElementById('nextJoke');
const shareJoke = document.getElementById('shareJoke');
const jokesRevealedElement = document.getElementById('jokesRevealed');

// Inicializar o site
function init() {
    createJokesGrid();
    loadProgress();
    setupEventListeners();
}

// Criar grid de números
function createJokesGrid() {
    jokesGrid.innerHTML = '';
    
    for (let i = 1; i <= 100; i++) {
        const numberElement = document.createElement('div');
        numberElement.className = 'joke-number';
        numberElement.dataset.number = i;
        numberElement.textContent = i;
        
        if (piadasReveladasArray.includes(i)) {
            numberElement.classList.add('revealed');
        }
        
        numberElement.addEventListener('click', () => revealJoke(i));
        jokesGrid.appendChild(numberElement);
    }
}

// Função para revelar uma piada
function revealJoke(number) {
    if (piadasReveladasArray.includes(number)) {
        return; // Piada já revelada
    }

    piadasReveladasArray.push(number);
    piadasReveladas++;
    saveProgress();

    const joke = piadas[number - 1];
    jokeContent.textContent = joke;
    jokeNumber.textContent = `Piada ${number}`;
    jokeModal.style.display = 'block';

    // Atualizar o número de piadas reveladas no grid
    const numberElement = document.querySelector(`.joke-number[data-number="${number}"]`);
    if (numberElement) {
        numberElement.classList.add('revealed');
    }
}

// Função para carregar o progresso
function loadProgress() {
    const savedProgress = localStorage.getItem('piadasReveladas');
    if (savedProgress) {
        piadasReveladasArray = JSON.parse(savedProgress);
        piadasReveladas = piadasReveladasArray.length;
        createJokesGrid(); // Atualizar o grid com o progresso
    }
}

// Função para salvar o progresso
function saveProgress() {
    localStorage.setItem('piadasReveladas', JSON.stringify(piadasReveladasArray));
}

// Função para configurar os listeners
function setupEventListeners() {
    closeModal.addEventListener('click', () => {
        jokeModal.style.display = 'none';
    });

    window.addEventListener('click', (event) => {
        if (event.target == jokeModal) {
            jokeModal.style.display = 'none';
        }
    });

    nextJoke.addEventListener('click', () => {
        revealJoke(piadasReveladas + 1);
    });

    shareJoke.addEventListener('click', () => {
        const joke = piadas[piadasReveladas - 1]; // Piada anterior
        const shareUrl = window.location.href;
        const shareText = `Piada: ${joke}\n\n${shareUrl}`;
        navigator.clipboard.writeText(shareText).then(() => {
            alert('Piada copiada para a área de transferência!');
        }).catch(() => {
            alert('Não foi possível copiar a piada.');
        });
    });

    jokesRevealedElement.textContent = `${piadasReveladas} de 100 piadas reveladas`;
}

// Inicializar o site quando o DOM estiver pronto
document.addEventListener('DOMContentLoaded', init); 